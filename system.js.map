{"version":3,"file":"system.js","mappings":"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","sources":["webpack://tsos/./src/shared/LexerStream.ts","webpack://tsos/./src/system/Display.ts","webpack://tsos/./src/system/FileSystem.ts","webpack://tsos/./src/system/Process.ts","webpack://tsos/./src/system/System.ts","webpack://tsos/./src/system/UserIdent.ts","webpack://tsos/./src/system/display/DisplayLexer.ts","webpack://tsos/webpack/bootstrap","webpack://tsos/./src/system/root.ts"],"sourcesContent":["export default class LexerStream {\n    private input: string;\n\n    private lin: number = 0;\n\n    private pos: number = 0;\n\n    private col: number = 0;\n\n    constructor(input: string) {\n        this.input = input;\n    }\n\n    get position(): number {\n        return this.pos;\n    }\n\n    get line(): number {\n        return this.lin;\n    }\n\n    get column(): number {\n        return this.col;\n    }\n\n    public next(): string {\n        const char = this.peek();\n        this.pos++;\n        if (char == \"\\n\") {\n            this.lin++;\n            this.col = 0;\n        } else {\n            this.col++;\n        }\n        return char;\n    }\n\n    public peek(count: number = 0): string {\n        return this.input.charAt(this.pos + count);\n    }\n\n    public eof() {\n        return this.peek() == \"\";\n    }\n\n    public croak(error: string) {\n        return new Error(`[${this.line}:${this.col}] - ${error}`);\n    }\n\n    public rewindTo(position: number) {\n        this.rewind();\n        while (this.pos < position) {\n            this.next();\n        }\n    }\n\n    public rewind() {\n        this.pos = 0;\n        this.lin = 0;\n        this.col = 0;\n    }\n}","import { IOFeed, iOutput } from \"../interfaces/SystemInterfaces\";\nimport DisplayLexer from \"./display/DisplayLexer\";\n\nexport default class Display {\n    private static _instance: DisplayInstance | null = null;\n\n    public static get instance(): DisplayInstance {\n        if (Display._instance === null) {\n            const elem = document.getElementById(\"main-display\");\n            if (elem === null) throw \"#main-display not found\";\n            Display._instance = new DisplayInstance(elem);\n        }\n        return Display._instance;\n    }\n\n    public static hookOut(io: IOFeed, ident: string | null = null): void {\n        io.hookOut(Display.instance, ident);\n    }\n}\n\nclass DisplayStyle {\n    public f: string | null = null;\n    public b: string | null = null;\n    public s: string | null = null;\n    public r: string | null = null;\n\n    public styleSpan(span: HTMLSpanElement): HTMLSpanElement {\n        if (this.f != null) {\n            span.classList.add(\"col-fg-\" + this.f);\n        }\n        if (this.b != null) {\n            span.classList.add(\"col-bg-\" + this.b);\n        }\n        if (this.s != null) {\n            span.classList.add(\"styl-\" + this.s);\n        }\n        span.classList.add(\"disp-row-segment\");\n        return span;\n    }\n}\n\nclass DisplayInstance implements IOFeed {\n\n    private container: HTMLElement;\n    private column: number = -1;\n    private row: number = 0;\n\n    private data: string[] = [\"\"];\n\n    private outHooks: [IOFeed, string][] = [];\n\n    private colours: { [k: string]: { [k: string]: DisplayStyle } } = {};\n\n\n    constructor(elem: HTMLElement) {\n        this.container = elem;\n        this.emptyElem(this.container);\n        this.container.append(document.createElement(\"span\"));\n    }\n    end(_input: iOutput): void {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    hookOut(hook: IOFeed, ident: string): void {\n        this.outHooks.push([hook, ident]);\n    }\n\n    private mapStyleNum(num: number): string | null {\n        let style: null | string = null;\n        switch (num) {\n            case 1:\n                style = \"bold\";\n                break;\n            case 3:\n                style = \"italic\";\n            case 4:\n                style = \"underline\";\n                break;\n            case 5:\n                style = \"blink\";\n                break;\n            case 6:\n                style = \"blick-fast\";\n                break;\n            case 7:\n                style = \"reverse\";\n                break;\n            case 8:\n                style = \"hide\";\n                break;\n            case 9:\n                style = \"strike\";\n                break;\n            case 0:\n            default:\n                style = null;\n                break;\n        }\n        return style;\n    }\n\n    private mapColour(c: number): string {\n        const colours: { [k: string]: string } = {\n            \"0\": \"black\",\n            \"1\": \"red\",\n            \"2\": \"green\",\n            \"3\": \"yellow\",\n            \"4\": \"blue\",\n            \"5\": \"purple\",\n            \"6\": \"cyan\",\n            \"7\": \"white\",\n        };\n\n\n        return colours[c.toString().charAt(c.toString().length - 1)] || \"white\";\n    }\n\n    private mapColourType(c: number): \"f\" | \"b\" {\n        if (c >= 40 && c < 50) return \"b\";\n        return \"f\";\n    }\n\n    private addColour(row: number, column: number, col: string): number[] {\n        if (!this.colours.hasOwnProperty(`${row}`)) {\n            this.colours[`${row}`] = {};\n        }\n        const style: DisplayStyle = this.colours[`${row}`][`${column}`] || new DisplayStyle();\n        style.r = col;\n        const cols = col.split(\";\");\n        const colnum: number = parseInt(cols.pop() || \"0\");\n        const stylnum: number = parseInt(cols.pop() || \"0\");\n\n        const colour = this.mapColour(colnum)\n\n        style.s = this.mapStyleNum(stylnum)\n\n        if (this.mapColourType(colnum) == \"b\") {\n            style.b = colour;\n        } else {\n            style.f = colour;\n        }\n\n        if (col === \"0\") {\n            style.f = \"reset\";\n            style.b = \"reset\";\n            style.s = \"reset\";\n        }\n\n        this.colours[`${row}`][`${column}`] = style;\n        return [row];\n    }\n\n    input(_input: iOutput, _ident: string | null): void {\n        let input = \"\";\n        if (_input instanceof Array) {\n            input = _input.map(i => (i instanceof Array) ? i.join(\"\\t\") : i).join(\"\\n\");\n        } else {\n            input = _input;\n        }\n\n        const lines: number[] = this.writeInputToData(input);\n\n        this.redrawLines(lines);\n\n        this.container.scrollTop = this.container.scrollHeight;\n    }\n\n    private output(output: iOutput, ident?: string): void {\n        this.outHooks.forEach(h => h[0].input(output, ident || h[1]));\n    }\n\n    private emptyElem(elem: Element): void {\n        while (elem.firstChild) {\n            elem.removeChild(elem.firstChild);\n        }\n    }\n\n    private redrawLines(lines: number[]): void {\n        lines.sort();\n        lines.forEach(l => {\n            const line = this.data[l];\n            // console.log(\"Redraw\", l, line);\n            this.drawLine(line, l);\n        });\n    }\n\n    private getLastDisplayStyleBefore(line: number): DisplayStyle {\n        let set: [number, [number, DisplayStyle][]][] = Object.entries(this.colours).map(v => {\n            const entries = Object.entries(v[1]);\n            return [parseInt(v[0]), entries.map(v => [parseInt(v[0]), v[1]])];\n        });\n        set = set.filter(v => v[0] < line);\n        set = set.filter(v => v[1].length);\n        set.sort((a, b) => b[0] - a[0]);\n        ((set[0] || [])[1] || []).sort((a, b) => b[0] - a[0]);\n        return (((set[0] || [])[1] || [])[0] || [])[1] || new DisplayStyle();\n    }\n\n    private drawLine(line: string, index: number): void {\n\n        const row = this.container.children.item(index);\n        if (row == null) {\n            console.log(\"couldnt find row for\", index, line);\n            return;\n        }\n\n\n        const rowNum = this.data.length - 1 - this.row;\n        let colNum = this.column < 0 ? this.data[rowNum].length - 1 : this.column;\n        if (colNum < 0) colNum = 0;\n\n        const colours = this.colours[index] || {};\n\n        if (!colours.hasOwnProperty(\"0\")) {\n            colours[\"0\"] = this.getLastDisplayStyleBefore(index);\n        }\n        const cols: number[] = Object.keys(colours).map(c => parseInt(c));\n        let last: number = 0;\n        const parts: string[] = [];\n        cols.forEach(c => {\n            if (c == 0) return;\n            parts.push(line.substring(last, c));\n            last = c;\n        });\n        parts.push(line.substring(last));\n\n\n        this.emptyElem(row);\n\n        if (index == rowNum) {\n            const caretSpan = document.createElement(\"span\");\n            caretSpan.classList.add(\"caret-span\")\n            caretSpan.textContent = (new Array(colNum + 1)).join(\" \");\n            row.append(caretSpan);\n        }\n\n        parts.map((txt, i) => {\n            const span = document.createElement(\"span\");\n            span.textContent = txt.split(\"\").join(\"\\u200B\");\n            const style = Object.values(colours)[i] || null;\n            if (style !== null) {\n                return style.styleSpan(span);\n            }\n            return span;\n        }).forEach(span => {\n            row.append(span);\n        });\n    }\n\n\n    private handleEscapeSequence(row: number, column: number, sequence: string): number[] {\n        let rowsAffected: number[] = [];\n        const type = sequence.charAt(sequence.length - 1).toLowerCase();\n        const pass = sequence.substring(2, sequence.length - 1);\n        switch (type) {\n            case \"m\":\n                rowsAffected = this.addColour(row, column, pass);\n                break;\n            case \"j\":\n                this.data = [\"\"];\n                this.row = 0;\n                row = 0;\n                column = 0;\n                this.column = 0;\n                this.colours = {};\n                this.emptyElem(this.container);\n                this.container.append(document.createElement(\"span\"));\n                rowsAffected.push(0);\n                break;\n            case \"c\":\n                this.column = column + 1;\n                rowsAffected.push(row);\n                break;\n            case \"d\":\n                this.column = column - 1;\n                rowsAffected.push(row);\n                break;\n            case \"k\":\n                this.data[row] = this.data[row].substring(0, column);\n                const cols = this.colours[row.toString()] || {};\n                this.colours[row.toString()] = {};\n                Object.entries(cols).filter(e => (parseInt(e[0]) || 0) <= column)\n                    .forEach(e => {\n                       this.colours[row][e[0].toString()] = e[1]; \n                    });\n                rowsAffected.push(row);\n                break;\n            case \"n\":\n                this.output(`\\u001B[${row};${column}R`);\n                break;\n            default:\n                console.log(\"Unhandled Escape Sequence\", sequence);\n        }\n        if (this.column < 0) this.column = 0;\n        if (this.column > this.data[row].length) this.column = this.data[row].length;\n        return rowsAffected;\n    }\n\n    private handleSpecialChar(char: string): number[] {\n        const r = this.data.length - 1 - this.row;\n        const row: string = this.data[r];\n        let c = this.column < 0 ? this.data[r].length - 1 : this.column;\n        if (c < 0) c = 0;\n        const linesAffected: number[] = [];\n        switch (char) {\n            case \"\\n\":\n                this.row--;\n                if (this.row < 0) {\n                    this.data.push(\"\");\n                    this.container.append(document.createElement(\"span\"));\n                    this.row = 0;\n                    this.column = 0;\n                    linesAffected.push(r);\n                    linesAffected.push(this.data.length - 1);\n                }\n                break;\n            case \"\\u0007\":\n                this.beep();\n                break;\n            case \"\\b\":\n                if (row.length > 0) {\n                    this.data[r] = row.substring(0, c - 1) + row.substring(c);\n                    c--;\n                    this.column = c;\n                    linesAffected.push(r);\n                } else {\n                    console.log(\"handle going back a line\");\n                }\n                break;\n            case \"\\u007F\":\n                if (row.length > 0) {\n                    this.data[r] = row.substring(0, c) + row.substring(c + 1);\n                    linesAffected.push(r);\n                } else {\n                    console.log(\"handle going back a line\");\n                }\n                break;\n            case \"\\t\":\n                linesAffected.push(...this.handleChars(char));\n                break;\n            default:\n                linesAffected.push(...this.handleChars(\"[\" + encodeURIComponent(char) + \"]\"));\n                break;\n        }\n        return linesAffected;\n    }\n\n    private writeInputToData(input: string): number[] {\n        const linesAffected: number[] = [];\n\n        const lex = DisplayLexer.createFromString(input, [\n            { s: /[\\u001B]/, e: /[a-zA-Z]/ },\n            { s: /[\\u0000-\\u001A\\u007F]/, e: null },\n        ]);\n\n        while (!lex.eof()) {\n            const next = lex.next() || \"\";\n\n            if (/[\\u0000-\\u001A\\u007F]/.test(next[0] || \"\")) {\n                linesAffected.push(...this.handleSpecialChar(next))\n            } else {\n                linesAffected.push(...this.handleChars(next));\n            }\n        }\n\n        return [...new Set(linesAffected)];\n    }\n\n    private handleChars(next: string): number[] {\n\n        const r = this.data.length - 1 - this.row;\n        let c = this.column < 0 ? this.data[r].length - 1 : this.column;\n        if (c < 0) c = 0;\n        const linesAffected: number[] = [];\n        switch (next[0] || \"\") {\n            case \"\\u001B\":\n                linesAffected.push(...this.handleEscapeSequence(r, c, next));\n                break;\n            default:\n                let row = this.data[r];\n                if (this.column >= row.length || this.column < 0) {\n                    row += next;\n                } else {\n                    row = row.substr(0, this.column) + next + row.substr(this.column + next.length);\n                }\n                if (this.column > -1) {\n                    this.column += next.length;\n                }\n                this.data[r] = row;\n                linesAffected.push(r);\n                break;\n        }\n        return linesAffected;\n    }\n\n    private beep() {\n        var snd = new Audio(\"data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=\");\n        snd.play();\n    }\n\n}\n","import { iFAccess, iFileSystem, iUserIdent } from \"../interfaces/SystemInterfaces\";\n\nconst _setItem = Storage.prototype.setItem;\n\nconst _cache: { [k: string]: string } = {};\nlet _cachePending: string[] = [];\n\nconst setItem = (key: string, value: string) => {\n    _cache[key] = value;\n    _cachePending.push(key);\n    _cachePending = [...(new Set(_cachePending))];\n    queueWrite();\n}\n\nlet writeTick: number | null = null;\nconst queueWrite = () => {\n    if (writeTick !== null) return;\n    writeTick = window.setTimeout(() => {\n        if (_cachePending.length > 0) {\n            const key = _cachePending.shift();\n            if (key) {\n                _setItem.apply(window.localStorage, [key, _cache[key]]);\n                // console.log(key);\n            }\n        }\n        writeTick = null;\n        if (_cachePending.length > 0) {\n            queueWrite();\n        }\n    }, 100);\n}\n\nconst _getItem = Storage.prototype.getItem;\n\nconst getItem = (key: string): string | null => {\n    if (!_cache.hasOwnProperty(key)) {\n        const get = _getItem.apply(window.localStorage, [key]);\n        if (get != null) _cache[key] = get;\n    }\n    return _cache[key] || null;\n}\n\nStorage.prototype.setItem = (_key: string, _value: string) => {\n    throw \"Blocked\";\n};\n\nexport enum FSPerm {\n    execute = 1,\n    write = 2,\n    read = 4,\n}\n\nexport class FSAccess implements iFAccess {\n    private _owner: string;\n    private _group: string;\n    private perms: { [k: string]: number } = {\n        user: 0,\n        group: 0,\n        other: 0,\n    };\n\n    public accessTime: number;\n    public modifyTime: number;\n    public changeTime: number;\n    public createTime: number;\n    public accessUndefined: boolean = false;\n\n    constructor(perm: string, owner: string, group: string, accessTime?: number, modifyTime?: number, changeTime?: number, createTime?: number) {\n        this.setPerm(perm);\n        this._owner = owner;\n        this._group = group;\n        if (accessTime === undefined) this.accessUndefined = true;\n        this.accessTime = accessTime || (Date.now() / 1000 | 0);\n        this.modifyTime = modifyTime || (Date.now() / 1000 | 0);\n        this.changeTime = changeTime || (Date.now() / 1000 | 0);\n        this.createTime = createTime || (Date.now() / 1000 | 0);\n    }\n\n    public get permString(): string {\n        return `0${this.perms.user}${this.perms.group}${this.perms.other}`;\n    }\n\n    public get longPermString(): string {\n        return [\n            this.permToLongString(this.perms.user),\n            this.permToLongString(this.perms.group),\n            this.permToLongString(this.perms.other),\n        ].join(\"\");\n    }\n\n    private permToLongString(perm: number) {\n        return [\n            this.permTest(perm, FSPerm.read) ? \"r\" : \"-\",\n            this.permTest(perm, FSPerm.write) ? \"w\" : \"-\",\n            this.permTest(perm, FSPerm.execute) ? \"x\" : \"-\",\n        ].join(\"\");\n    }\n\n    public static fromAccessString(str: string): FSAccess {\n        const parts = str.split(\":\");\n        if (parts.length > 3) {\n            return new FSAccess(parts[2], parts[0], parts[1], parseInt(parts[3]) || undefined, parseInt(parts[4]) || undefined, parseInt(parts[5]) || undefined, parseInt(parts[6]) || undefined);\n        } else if (parts.length == 3) {\n            return new FSAccess(parts[2], parts[0], parts[1]);\n        }\n        throw \"Invalid Access String: \" + str;\n    }\n\n    // public getListArray(octet: boolean = false): string[] {\n    //     return [\n    //         octet ? this.permString : this.longPermString,\n    //         \"0\",\n    //         this.owner,\n    //         this.group,\n    //         \"0\"\n    //     ];\n    // }\n\n    public get owner(): string {\n        return this._owner;\n    }\n\n    public get group(): string {\n        return this._group;\n    }\n\n    public setOwner(owner: string): void {\n        this._owner = owner;\n    }\n\n    public setGroup(group: string): void {\n        this._group = group;\n    }\n\n    public setPerm(perm: string) {\n        if (!/^[0-7]{3,4}$/.test(perm)) throw \"perm must be in 777 or 0777 format\";\n        this.perms.other = parseInt(perm.substr(perm.length - 1, 1));\n        this.perms.group = parseInt(perm.substr(perm.length - 2, 1));\n        this.perms.user = parseInt(perm.substr(perm.length - 3, 1));\n    }\n\n    public toString(): string {\n        return `${this.owner}:${this.group}:${this.permString}:${this.accessTime}:${this.modifyTime}:${this.changeTime}:${this.createTime}`;\n    }\n\n    private getUserLevel(user: iUserIdent): \"user\" | \"group\" | \"other\" {\n        if (this.owner == user.name || user.name == \"root\") return \"user\";\n        if (user.groups.includes(this.group)) return \"group\";\n        return \"other\";\n    }\n\n    public canRead(user: iUserIdent): boolean {\n        return this.userHasPerm(user, FSPerm.read);\n    }\n\n    public canWrite(user: iUserIdent): boolean {\n        return this.userHasPerm(user, FSPerm.write);\n    }\n\n    public canExecute(user: iUserIdent): boolean {\n        return this.userHasPerm(user, FSPerm.execute);\n    }\n\n    private userHasPerm(user: iUserIdent, perm: FSPerm): boolean {\n        switch (this.getUserLevel(user)) {\n            case \"user\":\n                if (this.permTest(this.perms.user, perm)) return true;\n            case \"group\":\n                if (this.permTest(this.perms.group, perm)) return true;\n            case \"other\":\n                if (this.permTest(this.perms.other, perm)) return true;\n            default:\n                return false;\n        }\n    }\n\n    private permTest(perm: number, test: FSPerm): boolean {\n        //@ts-ignore\n        const testPerm: number = parseInt(test);\n        return (perm & testPerm) > 0;\n    }\n}\n\nexport class PathResolver {\n    public static parent(name: string) {\n        const parts = name.split(\"/\");\n        parts.pop();\n        return parts.join(\"/\");\n    }\n\n    public static resolve(name: string, cwd: string, username: string) {\n        const parts = name.split(\"/\");\n        if ((parts[0] || \"\") == \"~\") {\n            parts.shift();\n            parts.unshift(username);\n            if (username != \"root\") {\n                parts.unshift(\"home\");\n            }\n            parts.unshift(\"\");\n        }\n        if (parts[0] != \"\") {\n            cwd.split(\"/\").reverse().forEach(p => parts.unshift(p));\n        }\n        const out: string[] = [];\n        parts.forEach(p => {\n            if (p == \".\") return;\n            else if (p == \"..\") out.pop();\n            else out.push(p);\n        });\n        return \"/\" + out.filter(i => i.length > 0).join(\"/\");\n    }\n\n    public static abreviate(path: string, cwd: string, username: string) {\n        path = PathResolver.resolve(path, cwd, username);\n        if (username == \"root\") {\n            if (path.startsWith(\"/root/\") || path == \"/root\") {\n                path = \"~\" + path.substr(\"/root\".length);\n            }\n        } else if (path.startsWith(`/home/${username}/`) || path == `/home/${username}`) {\n            path = \"~\" + path.substr(`/root/${username}`.length);\n        }\n        return path;\n    }\n}\n\nclass FPath {\n    private _path: string;\n    private _parent: FPath | null = null;\n    private cwd: string;\n    private username: string;\n    constructor(path: string, cwd: string, username: string) {\n        this.cwd = cwd;\n        this.username = username;\n        this._path = PathResolver.resolve(path, cwd, username);\n    }\n\n    public get parent(): FPath {\n        if (this._parent === null) {\n            this._parent = new FPath(PathResolver.parent(this.path), this.cwd, this.username);\n        }\n        return this._parent;\n    }\n\n    public get path(): string {\n        return this._path;\n    }\n\n    public get isRoot(): boolean {\n        return this.path === \"/\";\n    }\n\n    public toString(): string {\n        return this.path;\n    }\n\n    public get parentList(): FPath[] {\n        if (this.isRoot) return [];\n        let parent = this.parent;\n        const parents = [parent];\n        while (!parent.isRoot) {\n            parent = parent.parent;\n            parents.unshift(parent);\n        }\n        return parents;\n    }\n\n}\n\nexport class FileSystemHandle implements iFileSystem {\n    private _cwd: string = \"/\";\n    private user: iUserIdent;\n    private fs: FileSystem;\n    constructor(user: iUserIdent) {\n        this.user = user;\n        this.fs = new FileSystem();\n    }\n\n    public clone(user?: iUserIdent): FileSystemHandle {\n        user = user || this.user.clone();\n        const fs = new FileSystemHandle(user);\n        fs.setCwd(this.cwd);\n        return fs;\n    }\n\n    public write(path: string | FPath, data: string) {\n        path = this.ensureFPath(path);\n        this.writeCheck(path);\n        this.fs.write(path, data);\n    }\n\n    public append(path: string | FPath, data: string) {\n        path = this.ensureFPath(path);\n        this.writeCheck(path);\n        this.fs.append(path, data);\n    }\n\n    public prepend(path: string | FPath, data: string) {\n        path = this.ensureFPath(path);\n        this.writeCheck(path);\n        this.fs.prepend(path, data);\n    }\n\n    public mkdir(path: string | FPath) {\n        path = this.ensureFPath(path);\n        this.createCheck(path);\n        this.fs.mkdir(path, this.user.name);\n    }\n\n    public touch(path: string | FPath) {\n        path = this.ensureFPath(path);\n        this.createCheck(path);\n        this.fs.touch(path, this.user.name);\n    }\n\n    public read(path: string | FPath): string {\n        path = this.ensureFPath(path);\n        this.readCheck(path);\n        return this.fs.read(path) || \"\";\n    }\n\n    public delete(path: string | FPath): void {\n        path = this.ensureFPath(path);\n        this.writeCheck(path);\n        this.fs.delete(path);\n    }\n\n    public resolve(path: string): string {\n        const p = PathResolver.resolve(path, this.cwd, this.user.name);\n        return p;\n    }\n\n    public abreviate(path: string | FPath): string {\n        path = this.ensureFPath(path);\n        return PathResolver.abreviate(path.path, this.cwd, this.user.name);\n    }\n\n    private createCheck(path: FPath): void {\n        if (!this.canRead(path.parent)) {\n            throw `'${path.parent}' does not exist [CC]`;\n        }\n        if (!this.isDir(path.parent)) {\n            throw `'${path.parent}' is not a directory [CC]`;\n        }\n        if (!this.canWrite(path.parent)) {\n            throw `'${path.parent}' access denied [CC]`;\n        }\n        if (this.fs.exists(path)) {\n            throw `${path} already exists [CC]`;\n        }\n    }\n\n    private writeCheck(path: FPath): void {\n        if (!this.fs.exists(path)) {\n            this.touch(path);\n        }\n        if (!this.canWrite(path)) {\n            throw `${path} access denied [WC]`;\n        }\n    }\n\n    private readCheck(path: FPath): void {\n        if (!this.canRead(path)) {\n            throw `${path} access denied [RC]`;\n        }\n    }\n\n    private executeCheck(path: FPath): void {\n        if (!this.canExecute(path)) {\n            throw `${path} is not executable [EC]`;\n        }\n    }\n\n    public canRead(path: string | FPath): boolean {\n        path = this.ensureFPath(path);\n        if (path.isRoot) return true;\n        if (!this.exists(path)) {\n            console.log(\"READ NOT EXIST\");\n            return false;\n        }\n        return this.fs.getPerm(path).canRead(this.user);\n    }\n\n    public canWrite(path: string | FPath): boolean {\n        path = this.ensureFPath(path);\n        if (!this.exists(path)) {\n            return false\n        }\n        return this.fs.getPerm(path).canWrite(this.user);\n    }\n\n    public canExecute(path: string | FPath): boolean {\n        path = this.ensureFPath(path);\n        if (path.isRoot) return true;\n        if (!this.exists(path)) {\n            return false\n        }\n        return this.fs.getPerm(path).canExecute(this.user);\n    }\n\n    public exists(path: string | FPath): boolean {\n        path = this.ensureFPath(path);\n        if (!this.fs.isType(path.parent, FSType.dir)) {\n            console.log(\"EXISTS PARENT NOT DIR\");\n            return false;\n        }\n        const perm = this.fs.getPerm(path.parent);\n        if (!perm.canRead(this.user)) {\n            console.log(`EXISTS PARENT NOT PERM ${perm}`);\n            return false;\n        }\n        return this.fs.exists(path);\n    }\n\n    public isDir(path: string | FPath): boolean {\n        path = this.ensureFPath(path);\n        return this.isType(path, FSType.dir);\n    }\n\n    private ensureFPath(path: string | FPath): FPath {\n        if (typeof path === \"string\") path = new FPath(path, this.cwd, this.user.name);\n        return path;\n    }\n\n    public isFile(path: string | FPath): boolean {\n        path = this.ensureFPath(path);\n        return this.isType(path, FSType.file);\n    }\n\n    private isType(path: string | FPath, type: FSType): boolean {\n        path = this.ensureFPath(path);\n        this.readCheck(path);\n        return this.fs.getType(path) == type;\n    }\n\n    public get cwd(): string {\n        return this._cwd;\n    }\n\n    public setCwd(path: string | FPath): void {\n        path = this.ensureFPath(path);\n        if (!this.canExecute(path)) {\n            throw `${path} access denied`;\n        }\n        if (!this.isDir(path)) {\n            throw `${path} is not a directory`;\n        }\n        this._cwd = path.path;\n        this.user.setEnv(\"cwd\", path.path);\n    }\n\n    public chmod(path: string | FPath, perm: string) {\n        path = this.ensureFPath(path);\n        this.writeCheck(path);\n        const access = this.fs.getPerm(path);\n        access.setPerm(perm);\n        this.fs.setPerm(path, access);\n    }\n\n    public chown(path: string | FPath, owner: string, group?: string) {\n        path = this.ensureFPath(path);\n        this.writeCheck(path);\n        const access = this.fs.getPerm(path);\n        access.setOwner(owner);\n        access.setGroup(group || access.group);\n        this.fs.setPerm(path, access);\n    }\n\n    public list(path: string | FPath, trim: boolean = false): string[] {\n        const fpath = this.ensureFPath(path);\n        this.executeCheck(fpath);\n        let items = this.fs.list(fpath);\n        items = items.filter(i => this.canRead(i));\n        if (trim) {\n            items = items.map(key => trim ? key.substr(fpath.path.length + (fpath.path == \"/\" ? 0 : 1)) : key)\n        }\n        return items;\n    }\n\n    public getPerm(path: string | FPath): iFAccess {\n        path = this.ensureFPath(path);\n        this.readCheck(path);\n        return this.fs.getPerm(path);\n    }\n}\n\nclass FileSystem {\n    public mkdir(path: FPath, owner: string, group: string | null = null): void {\n        this.setType(path, FSType.dir);\n        this.setPerm(path, new FSAccess(\"755\", owner, group || owner));\n    }\n\n    public touch(path: FPath, owner: string, group: string | null = null): void {\n        this.setType(path, FSType.file);\n        this.setPerm(path, new FSAccess(\"644\", owner, group || owner));\n        this.write(path, \"\");\n    }\n\n    private setType(path: FPath, type: FSType): void {\n        setItem(\"FS:T:\" + path.path, type);\n    }\n\n    public setPerm(path: FPath, perm: FSAccess): void {\n        setItem(\"FS:P:\" + path.path, perm.toString());\n    }\n\n    public isType(path: FPath, type: FSType): boolean {\n        return this.getType(path) == type;\n    }\n\n    public getType(path: FPath): FSType | null {\n        const t: string = getItem(\"FS:T:\" + path.path) || \"\";\n        return FSType[t as keyof typeof FSType] || null;\n    }\n\n    public read(path: FPath): string | null {\n        const res = getItem(\"FS:D:\" + path.path);\n        if (res != null) {\n            const perm = this.getPerm(path);\n            perm.accessTime = (Date.now() / 1000 | 0);\n            this.setPerm(path, perm);\n        }\n        return res;\n    }\n\n    public write(path: FPath, data: string): void {\n        setItem(\"FS:D:\" + path.path, data);\n        const perm = this.getPerm(path);\n        perm.modifyTime = (Date.now() / 1000 | 0);\n        this.setPerm(path, perm);\n    }\n\n    public delete(path: FPath): void {\n        const t = this.getType(path);\n        if (t !== null) {\n            setItem(`!FS:T:${path.path}`, t);\n            localStorage.removeItem(`FS:T:${path.path}`);\n            if (t == FSType.file) {\n                setItem(`!FS:D:${path.path}`, this.read(path) || \"\");\n                localStorage.removeItem(`FS:D:${path.path}`);\n            }\n            setItem(`!FS:P:${path.path}`, this.getPerm(path).toString());\n            localStorage.removeItem(`FS:P:${path.path}`);\n        }\n    }\n\n    public append(path: FPath, data: string): void {\n        this.write(path, this.read(path) + data);\n    }\n\n    public prepend(path: FPath, data: string): void {\n        this.write(path, data + this.read(path));\n    }\n\n    public exists(path: FPath): boolean {\n        return this.getType(path) != null;\n    }\n\n    public getPerm(path: FPath): FSAccess {\n        const str = getItem(\"FS:P:\" + path.path) || \"\";\n        const perm = FSAccess.fromAccessString(str);\n        if (perm.accessUndefined) {\n            this.setPerm(path, perm);\n        }\n        return perm;\n    }\n\n    public list(path: FPath, deleted: boolean = false): string[] {\n        return Object.keys(localStorage)\n            .filter(key => key.startsWith(\"FS:T:\") || (deleted ? key.startsWith(\"!FS:T:\") : false))\n            .map(key => key.substr(5))\n            .filter(key => key.startsWith(path.path + (path.path == \"/\" ? \"\" : \"/\")) && key.length > path.path.length)\n            .filter(key => !key.substr(path.path.length + (path.path == \"/\" ? 0 : 1)).includes(\"/\"));\n    }\n}\n\nenum FSType {\n    file = \"file\",\n    dir = \"dir\",\n    in = \"in\",\n    out = \"out\",\n}\n\n(new FileSystem()).mkdir(new FPath(\"/\", \"/\", \"root\"), \"root\", \"root\");\n(new FileSystem()).mkdir(new FPath(\"/bin\", \"/\", \"root\"), \"root\", \"root\");\n(new FileSystem()).mkdir(new FPath(\"/home\", \"/\", \"root\"), \"root\", \"root\");\n(new FileSystem()).mkdir(new FPath(\"/home/guest\", \"/\", \"root\"), \"guest\", \"guest\");\n(new FileSystem()).mkdir(new FPath(\"/home/wolfgang\", \"/\", \"root\"), \"wolfgang\", \"wolfgang\");\n(new FileSystem()).mkdir(new FPath(\"/root\", \"/\", \"root\"), \"root\", \"root\");\n(new FileSystem()).mkdir(new FPath(\"/etc\", \"/\", \"root\"), \"root\", \"root\");\n(new FileSystem()).mkdir(new FPath(\"/etc/shell\", \"/\", \"root\"), \"root\", \"root\");\n","import { iFileSystem, IOFeed, iOutput, iProcess, iProcessInstance, iSystem, iUserIdent } from \"../interfaces/SystemInterfaces\";\n\nexport default class Process implements iProcess {\n    private _pid: number;\n    private _system: iSystem;\n    private _binary: iProcessInstance;\n    private _parent: iProcess | null = null;\n    private _instance: iProcessInstance | null;\n    private args: string[];\n\n    constructor(pid: number, system: iSystem, binary: any, args: string[], parent: iProcess | null = null) {\n        this._pid = pid;\n        this._system = system;\n        this._binary = binary;\n        this._parent = parent;\n        this.args = args;\n        try {\n            //@ts-ignore\n            this._instance = new this._binary(this);\n        } catch (e) {\n            this.parent?.input(\"\\u001B[31mError\\u001B[0m: Failed to start process\", \"error\");\n            this._instance = new DummyProc();\n        }\n    }\n    kill(): void {\n        this.instance?.kill();\n        this._instance = null;\n    }\n\n    end(input: iOutput): void {\n        this._instance?.end(input);\n        this._instance = null;\n    }\n\n    hookOut(hook: IOFeed, ident: string | null = null): void {\n        this.instance?.hookOut(hook, ident);\n    }\n    input(input: iOutput, ident: string | null = null): void {\n        this.instance?.input(input, ident);\n    }\n\n    public get system(): iSystem {\n        return this._system;\n    }\n\n    public get user(): iUserIdent {\n        return this.system.user;\n    }\n\n    public get pid(): number {\n        return this._pid;\n    }\n\n    public get instance(): iProcessInstance | null {\n        return this._instance;\n    }\n\n    public get parent(): iProcess | null {\n        return this._parent;\n    }\n\n    public get fileSystem(): iFileSystem {\n        return this.system.fileSystem;\n    }\n\n    public run(): Promise<iOutput> {\n        const out = this.instance?.run(this.args);\n        return out || Promise.reject(\"INSTANCE FAILE\");\n    }\n\n    public createProcess(location: string, args: string[]): iProcess {\n        let bin: string | null = null;\n        let loc: string | null = this.fileSystem.resolve(location);\n        if (this.fileSystem.exists(loc)) {\n            if (location.startsWith(\"/\") || location.startsWith(\"./\")) {\n                bin = this.fileSystem.read(loc);\n            }\n        }\n        if (bin === null) {\n            loc = this.getBinPath(location);\n            if (loc != null) {\n                bin = this.fileSystem.read(loc);\n            }\n        }\n        if (bin == null || loc == null) throw `${location} is not a recognized program\\n`;\n        if (!this.fileSystem.canExecute(loc)) throw `${loc} is not executable\\n`;\n        const first = bin.split(\"\\n\")[0];\n        if (first.startsWith(\"#!\")) {\n            const handler = first.substr(2).trim().split(\" \");\n            const app = handler.shift() || \"\";\n            if (app?.length > 0) {\n                return this.createProcess(app, [...handler, \"-s\", loc, ...args]);\n            }\n        }\n        const proc = this.system.createProcess(bin, args, this);\n        return proc;\n    }\n\n    private getBinPath(name: string): string | null {\n        const paths = this.getAvailablePrograms();\n        const path = paths.find(v => v[1].includes(name)) || null;\n        if (path == null) return path;\n        return path[0] + \"/\" + name;\n    }\n\n    private getAvailablePrograms(): [string, string[]][] {\n        const path = this.user.getEnv(\"path\").split(\";\");\n        return path.map(p => [p, this.fileSystem.list(p, true)]);\n    }\n\n    public log(...args: any[]): void {\n        console.log(`Proc[${this.pid}]: `, ...args);\n    }\n}\n\nclass DummyProc implements iProcessInstance {\n    end(_input: iOutput): void {\n        throw new Error(\"Method not implemented.\");\n    }\n    run(_args: string[]): Promise<iOutput> {\n        return Promise.resolve(\"\");\n    }\n    kill(): void {\n    }\n    hookOut(_hook: IOFeed, _ident: string | null): void {\n    }\n    input(_input: iOutput, _ident: string | null): void {\n    }\n\n}\n","import { UserIdent } from \"./UserIdent\";\nimport { FileSystemHandle, PathResolver } from \"./FileSystem\";\nimport { iProcess, iSystem, IOFeed, iFileSystem } from \"../interfaces/SystemInterfaces\";\nimport Display from \"./Display\";\nimport Process from \"./Process\";\n\n\nexport class SystemHandle implements iSystem {\n    public readonly PathResolver = PathResolver;\n\n    private _user: UserIdent;\n    private fs: iFileSystem;\n\n    constructor(user: UserIdent, fs: iFileSystem | null = null) {\n        this._user = user;\n        this.fs = fs || new FileSystemHandle(this.user);\n    }\n\n    public get user(): UserIdent {\n        return this._user;\n    }\n\n    public get fileSystem(): iFileSystem {\n        return this.fs;\n    }\n\n    public clone(): iSystem {\n        const user = this.user.clone();\n        const fs = this.fs.clone(user);\n        return new SystemHandle(user, fs);\n    }\n\n    public createSystemHandle(name: string, pass: string | null = null): SystemHandle {\n        if (name == this.user.name) return new SystemHandle(this.user);\n        const root = new UserIdent(\"root\", [\"root\"])\n        const fs = new FileSystemHandle(root);\n        const shadow = fs.read(\"/etc/shadow\").split(\"\\n\");\n        const line = (shadow.find(item => item.startsWith(name)) || \"\").split(\":\");\n        if (line.length > 1) {\n            if (line[1] == pass) {\n                const user = new UserIdent(name, [name]);\n                return new SystemHandle(user);\n            }\n        }\n        throw \"User Not found\";\n    }\n\n    public createProcess(bin: string, args: string[], creator: iProcess): iProcess {\n        return System.createProcess(bin, this, args, creator);\n    }\n}\n\nconst EVAL = window.eval;\nwindow.eval = (...args) => console.log(\"Eval Attempted\", args);\n\nexport class System {\n    private static processCount: number = 0;\n    private static inputHooks: IOFeed[] = [];\n    private static rootHash: string = \"\";\n\n    public static createProcess(bin: string, system: iSystem, args: string[], creator: iProcess | null): iProcess {\n        let next = null;\n        try {\n            next = EVAL(bin).default || null;\n        } catch (e) {\n            throw e.toString() + \"\\n\";\n        }\n        System.processCount++;\n        return new Process(System.processCount, system.clone(), next, args, creator);\n    }\n\n    public static setup(system: iSystem) {\n        return System.loadRoot(system, () => true)\n            .then(() => {\n                if (location.hostname == \"127.0.0.1\") {\n                    window.setInterval(() => System.loadRoot(system, (s: string) => s.startsWith(\"/bin/\")), 10000);\n                }\n            });\n    }\n\n    private static async loadRoot(system: iSystem, filter: ((s: string) => boolean)) {\n        const response = await fetch(\"/root.json\");\n        const txt = await response.text();\n        const hashB = await crypto.subtle.digest(\"SHA-1\", new TextEncoder().encode(txt));\n        const hashA = Array.from(new Uint8Array(hashB));\n        const hash = hashA.map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n        if (hash == System.rootHash) return;\n        console.log(\"root changed\", hash);\n        System.rootHash = hash;\n        const json = JSON.parse(txt);\n        if (json == null) throw \"root json is null\";\n        Object.entries(json).forEach(e => {\n            const path = e[0];\n            if (!filter(path)) return;\n            const file = e[1] || null;\n            if (typeof file == \"object\" && file != null && file.hasOwnProperty(\"content\")) {\n                //@ts-ignore\n                system.fileSystem.write(path, file[\"content\"] || \"\");\n                //@ts-ignore\n                const perms = (file[\"perm\"] || \"root:root:0755\").split(\":\");\n                system.fileSystem.chmod(path, perms[2] || \"755\");\n                system.fileSystem.chown(path, perms[0] || \"root\", perms[1] || \"root\");\n            } else {\n                console.log(e);\n            }\n        });\n        console.groupEnd();\n\n    }\n\n    public static boot(): void {\n        const root = new UserIdent(\"root\", [\"root\"]);\n        const rootSysHandle = new SystemHandle(root);\n        document.onkeypress = ev => {\n            System.keyInput(ev.key);\n            return false;\n        };\n        document.onkeydown = ev => {\n            switch (ev.key) {\n                case \"Backspace\":\n                case \"Tab\":\n                case \"ArrowUp\":\n                case \"ArrowDown\":\n                case \"ArrowLeft\":\n                case \"ArrowRight\":\n                case \"Home\":\n                case \"End\":\n                    System.keyInput(ev.key);\n                    return false;\n                case \"c\":\n                    if (ev.ctrlKey && !ev.altKey && !ev.shiftKey) {\n                        System.keyInput(\"\\u0018\");\n                        return false;\n                    }\n                default:\n                    // console.log(ev);\n                    break;\n            }\n        };\n        System.setup(rootSysHandle)\n            .then(() => {\n                const shell = rootSysHandle.fileSystem.read(\"/bin/shell\");\n                const guest = new UserIdent(\"guest\", [\"guest\"]);\n                const guestSysHandle = new SystemHandle(guest);\n                guestSysHandle.fileSystem.setCwd(\"~\");\n                const proc = System.createProcess(shell, guestSysHandle, [\"--motd\"], null);\n                Display.hookOut(proc);\n                System.hookInput(proc);\n                return proc.run();\n            })\n            .then(() => {\n                console.log(\"out\")\n            }).catch(_e => {\n                const disp = document.getElementById(\"main-display\");\n                while (disp?.firstChild) {\n                    disp.removeChild(disp.firstChild);\n                }\n                // location.reload();\n                console.log(_e);\n            });\n    }\n\n    private static hookInput(input: IOFeed): void {\n        System.inputHooks.push(input);\n    }\n\n    private static keyInput(ev: string): void {\n        System.inputHooks.forEach(hook => hook.input(ev, \"user\"));\n    }\n}\n","import { iUserIdent } from \"../interfaces/SystemInterfaces\";\n\nexport class UserIdent implements iUserIdent {\n    private _name: string;\n    private _groups: string[];\n    private _env: { [k: string]: string } = {\n        \"PATH\": \"/bin\"\n    };\n\n    constructor(name: string, groups: string[]) {\n        this._name = name;\n        this._groups = groups;\n    }\n\n    public get name(): string {\n        return this._name;\n    }\n\n    public get groups(): string[] {\n        return [...this._groups];\n    }\n\n    public getEnv(key: string): string {\n        key = key.toUpperCase();\n        if (key == \"USER\") return this.name;\n        return this._env[key] || \"\";\n    }\n\n    public setEnv(key: string, value: string): void {\n        key = key.toUpperCase();\n        this._env[key] = value;\n    }\n\n    public getEnvEntries(): [string, string][] {\n        return Object.entries(this._env);\n    }\n\n    public remEnv(key: string): void {\n        key = key.toUpperCase();\n        if (this._env.hasOwnProperty(key)) {\n            delete this._env[key];\n        }\n    }\n\n    public clone(): UserIdent {\n        const user = new UserIdent(this.name, this.groups);\n        this.getEnvEntries().forEach(v => user.setEnv(v[0], v[1]));\n        return user;\n    }\n\n}\n","import LexerStream from \"../../shared/LexerStream\";\n\ntype LexToke = { s: RegExp, e: RegExp | null };\n\nexport default class DisplayLexer {\n    private input: LexerStream;\n\n    private tokes: LexToke[] = [];\n\n    public static createFromString(input: string, tokes: LexToke[]) {\n        return new DisplayLexer(new LexerStream(input), tokes);\n    }\n\n    constructor(input: LexerStream, tokes: LexToke[]) {\n        this.input = input;\n        this.tokes = tokes;\n    }\n\n    public all(): string[] {\n        this.rewind();\n        let next = this.next();\n        const all: string[] = [];\n        while (next != null) {\n            all.push(next);\n            next = this.next();\n        }\n        return all;\n    }\n\n    public eof(): boolean {\n        return this.input.eof();\n    }\n\n    public rewind(): void {\n        this.input.rewind();\n    }\n\n    public next(): string | null {\n        if (this.input.eof()) return null;\n        if (this.nextIsStarter()) {\n            return this.readToken();\n        } else {\n            return this.input.next();\n        }\n    }\n\n    private nextIsStarter(): boolean {\n        return this.isStarter(this.input.peek());\n    }\n\n    private isStarter(s: string): boolean {\n        return this.tokes.some(t => t.s.test(s));\n    }\n\n    private readToken(): string {\n        const ch = this.input.peek();\n        const toke = this.tokes.find(t => t.s.test(ch)) || null;\n        if (toke == null) {\n            throw new Error(\"WAT\");\n        }\n        const end = toke.e;\n        if (end == null) {\n            return this.input.next();\n        } else {\n            return this.readUntil(s => end.test(s));\n        }\n    }\n\n\n    private readUntil(func: (current: string, next: string) => boolean): string {\n        let str = \"\";\n        while (!this.input.eof()) {\n            const s = this.input.next();\n            str += s;\n            if (func(s, this.input.peek())) break;\n        }\n        return str;\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { PathResolver } from \"./FileSystem\";\nimport { System } from \"./System\";\n\n// @ts-ignore\nwindow.PathResolver = PathResolver;\n\nSystem.boot();"],"names":[],"sourceRoot":""}